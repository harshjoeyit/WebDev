<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Jasmine Test</title>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jasmine/3.5.0/jasmine.css">
</head>

<body>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jasmine/3.5.0/jasmine.js"
            integrity="sha256-PePX8Jc4TIxzzVz0Qe4NsH3OUU8+Y49DBWvYgggNqkY=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jasmine/3.5.0/jasmine-html.js"
            integrity="sha256-qazAASTTgUrq9SOYkPSB3oEuqbhn+2j4kxGkVZ0GKjY=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jasmine/3.5.0/boot.js"
            integrity="sha256-HG8TKl0T65NyELmbUoo0H7/a1e++smYdXXtuuEsyKok=" crossorigin="anonymous"></script>
      <script>
            // describe 
            // it 
            // expect
            // matcher - toBe, not.toBe, toBeCloseTo, toBeDefined, toBeGreater, toContain, toEqual
            // Jasmine.any()

            var earth = {
                  isRound: true,
                  numberFromSun: 3,
                  percentWater: 75
            }

            describe("Earth", function () {
                  // spec 1
                  it("is round", function () {
                        expect(earth.isRound).toBe(true);
                  });
                  // spec 2
                  it("is 3rd planet from the sun", function () {
                        expect(earth.numberFromSun).toBe(3);
                  });
                  // spec 3 
                  it("has 75% water percentage", function () {
                        expect(earth.percentWater).toBe(75);
                  });
            });

            /*
            IF OF THE VARIABLES IS REFRENCE TO OTHER - THEN === OPERATOR RETURN TRUE
            var arr1 = [1, 2, 3];
            var arr2 = [1, 2, 3];

            console.log(arr1 === arr2);
            var arr3 = arr1;
            console.log(arr3 === arr1);
            */

            describe("Jasmine Matchers", function () {
                  it("allows for === and deep equality", function () {
                        expect(1 + 1).toBe(2);
                        expect([1, 2, 3]).toEqual([1, 2, 3]);
                  });
                  it("allows for easy precision checking", function () {
                        expect(3.1415).toBeCloseTo(3.14, 2);
                  });
                  it("allows for easy truty / falsey checking", function () {
                        expect(0).toBeFalsy();
                        expect([]).toBeTruthy();
                  });
                  it("allows for checking contents of an object", function () {
                        expect([1, 2, 3]).toContain(1);
                        expect({ name: 'Elie' }).toEqual(jasmine.objectContaining({ name: 'Elie' }));
                  });
                  it("allows for easy type checking", function () {
                        expect([]).toEqual(jasmine.any(Array));
                        expect(function () { }).toEqual(jasmine.any(Function));
                  })
            });

            // beforeEach - prevent code duplication 
            // testing array push
            describe("Arrays", function () {
                  var arr;
                  // before each it function is run 
                  // arr is redefined to be [1, 3, 5] each time 
                  beforeEach(function () {
                        arr = [1, 3, 5];
                  });
                  it("adds elements to an array", function () {
                        arr.push(7);
                        expect(arr).toEqual([1, 3, 5, 7]);
                  });
                  it("returns the new length of the array", function () {
                        expect(arr.push(7)).toBe(4);
                  });
                  it("adds anything into the array", function () {
                        expect(arr.push({})).toBe(4);
                  })
            })

            // afterEach
            describe("Counting", function () {
                  var count = 0;
                  beforeEach(function () {
                        count++;
                  });
                  afterEach(function () {
                        count = 0;
                  });
                  it("has a counter that increments", function () {
                        expect(count).toBe(1);
                  });
                  it("gets reset", function () {
                        expect(count).toBe(1);
                  });
            })

            // beforeAll, afterAll - variables are defined once 
            // it remains same among all the describes

            describe("Array methods", function () {
                  var arr;
                  beforeEach(function () {
                        arr = [1, 3, 5];
                  });

                  describe("#unshift", function () {
                        it("adds an elements to the beginnning of the array", function () {
                              arr.unshift(17);
                              expect(arr[0]).toBe(17);
                        });
                        it("returns the new length", function () {
                              expect(arr.unshift(100)).toBe(4);
                        });
                  });

                  describe("#push", function () {
                        it("adds elements to the end of the array", function () {
                              arr.push(7);
                              expect(arr[arr.length - 1]).toBe(7);
                        });
                        it("returns the new length", function () {
                              expect(arr.push(12)).toBe(4);
                        });
                  })
            });

            // testing a function 
            // described int the script below
            describe("square function", function () {
                  it("returns the squared result", function () {
                        expect(square(4)).toBe(16);
                        expect(square(10000)).toBe(100000000)
                  });
            });

            // Tips: 
            // one it block should only test one functionality
            // 1 or more expect be placed inside one it block if needed


            // Spies
            // can mimic any object and track calls to it ans arguments
            // exist in describe or it block in which it is defined


            

      </script>
      <script>
            // not adding this to the testing script
            function square(num) {
                  return num * num;
            }
      </script>
</body>

</html>